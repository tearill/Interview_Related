多进程架构带来了现代浏览器的体验，以 chrome 为例来说这个问题  
chrome 浏览器最基本的有四个进程  
1. 浏览器进程
2. 网络进程
3. 渲染进程
4. 标签页

从输入 URL 到页面显示分为两个阶段：导航阶段 和 渲染阶段  
## 导航阶段  
- 首先，用户输入 URL，浏览器接收 URL 的输入，判断输入的是搜索内容还是 URL 网址，如果是搜索内容，浏览器根据搜索引擎合成一个 URL，如果是网址，浏览器自动补全协议  
- 浏览器进程通过 IPC 进程间通信将 URL 交给网络进程，去网络进程中发起真正的 URL 请求  
- 网络进程拿到 URL 之后，先去查看本地缓存中有没有 URL 对应的资源，如果有，直接返回资源给浏览器进程，如果没有，就发起网络请求
- 网络请求开始，先进行 DNS 解析，DNS 解析会先查看本地有没有 URL 对应的 IP 地址的缓存，如果有，直接使用缓存的 IP 地址进行请求，如果没有，进行解析拿到 IP 地址之后进行请求
- 利用 IP 地址和服务器通过 TCP 三次握手建立连接
- 连接建立后网络进程向服务器发送构建好的请求信息
- 服务器收到请求信息后，生成响应数据，发送给网络进程
- 网络进程收到响应数据后解析响应头  
  - 重定向：如果响应头状态码是 301 或者 302，说明需要重定向到其他的 URL，就需要重新开始 URL 请求  
  - Content-Type 如果是字节流类型，octect-stream 的话，会被认为是下载类型，就会移交给下载处理器，导航流程结束  
  - Content-Type 如果是 text/html，继续导航，通过浏览器进程准备渲染
- 浏览器进程接收到网络进程解析的响应头之后，发送提交文档信息给渲染进程，通知渲染进程要准备接收数据
- 渲染进程接收到浏览器进程的提交文档消息之后，准备接收文档数据，直接和网络进程建立数据管道
- 浏览器进程将网络进程接收到的 HTML 数据交给渲染进程
- 数据接收完成后，渲染进程发送确认提交给浏览器进程
- 浏览器进程收到确认提交后更新浏览器界面状态
  - 安全状态
  - 地址栏 URL
  - 前进后退的 URL
  - 更新 web 页面
- 接下来进入渲染阶段

## 渲染阶段  
渲染流水线可以分为：构建 DOM 树 -> 样式计算 -> 布局阶段 -> 分层 -> 绘制列表 -> 分块和生成位图 -> 合成和显示  
- 构建 DOM 树  
  把 HTML 文档结构转换为浏览器可理解的结构 -- DOM 树
- 样式计算  
  - 样式表格式化：将 CSS 转换为浏览器可理解的结构 -- StyleSheet  
  - 样式属性标准化：有些 CSS 样式的数值不易被理解，比如 em、bold等
  - 计算 DOM 树中每个节点的具体样式
- 布局阶段
  创建布局树
- 分层
  对特定的节点分层，构建图层树
  - 显式合成 --- 拥有层叠上下文的节点 || 需要裁剪的地方(滚动条)
  - 隐式合成 --- 当把一个层叠等级低的节点提升为单独的图层后，所有层级比它高的节点都会被提升为单独的图层，容易造成层爆炸
- 绘制列表  
  把图层绘制拆分成很多小的绘制指令，把指令按照顺序组合成一个待绘制列表
- 分块  
  视窗范围有限，但是页面可能很大，所以要进行划分图块  
  加速首屏展示
- 生成位图  
- 合成和显示  
  当所有图块都被栅格化之后，合成线程会生成一个绘制命令发送给浏览器进程  
  浏览器进程的 viz 组件接收到这个命令之后，根据命令把内容绘制到内存中，也就是生成了页面，然后把这部分内容发送给显卡，显示器显示页面