# 跨域系列总结  
## 什么是跨域？  
  一个域下的文档或脚本试图去请求另一个域下的资源  
  是浏览器施加的安全限制  
## 同源策略  
  同源策略是一种约定，是浏览器最核心最基本的安全功能，缺少同源策略，浏览器容易收到XSS、CSRF等攻击  
  所谓同源是指"协议+域名+端口"三者相同，即便两个不同的域名指向同一个ip地址，也非同源  

***注意的点：***  
1. 如果是协议和端口造成的跨域，前端无法处理  
2. 是否跨域，仅仅通过 URL 的首部来判断，不会通过域名对应的 IP 是否相同来判断  
  "URL 的首部" 可以理解为 "协议、域名和端口必须匹配"  
3. 跨域并不是请求发不出去了，而是请求发出去了，也正常返回结果了，但是结果被浏览器拦截了  

## 跨域解决方案  

### JSONP  
  JSONP 本质是一个 Hack，利用 `<script>` 标签不受同源策略限制的特性进行跨域操作  
  通过动态创建script，再请求一个带参网址实现跨域通信  
  - 优点：  
    1. 实现简单  
    2. 兼容性好  
  - 缺点：  
    1. 只支持 get 请求(`<script>`标签只能 get)  
    2. 有安全性问题，容易受到 XSS 攻击(跨站脚本)  
    3. 需要服务端配合 JSONP 进行一定程度的改造  
  - 实现流程：  
    1. 声明一个回调函数，将回调函数名作为参数传递给跨域请求的服务器，函数形参为要获取的数据(服务器端返回的数据)  
    2. 创建一个 script 标签，跨域请求地址作为 script 标签的 src 属性值  
    3. 服务器收到请求后取出参数和回调函数名，将相应的数据作为回调函数的参数并返回给客户端调用回调函数  
    实现见 JSONP 文件夹下  

### CORS  
  CORS 是目前主流的跨域解决方案，跨域资源共享(CORS) 是一种机制，它使用额外的 HTTP 头来告诉浏览器，让运行在一个 origin (domain) 上的Web 应用被准许访问来自不同源服务器上的指定的资源。  
  CORS 需要浏览器和后端同时支持  
  服务端设置 Access-Control-Allow-Origin 就可以开启 CORS  
  