# 为什么 script 标签的 src 请求不会跨域，但 Ajax 发送的异步请求会跨域？  

- 同源策略是一个重要的安全策略，它用于限制一个 origin 的文档或者它加载的脚本如何能与另一个源的资源进行交互。它能帮助阻隔恶意文档，减少可能被攻击的媒介  

- 同源策略控制不同源之间的交互，例如在使用 XMLHttpRequest 或  标签时则会受到同源策略的约束。这些交互通常分为三类：  

1. 跨域写操作（Cross-origin writes）一般是被允许的。例如链接（links），重定向以及表单提交。特定少数的 HTTP 请求需要添加 preflight。

2. 跨域资源嵌入（Cross-origin embedding）一般是被允许比如 img 的 src、style 的 href、script 的 src

3. 跨域读操作（Cross-origin reads）一般是不被允许的，但常可以通过内嵌资源来巧妙的进行读取访问。例如，你可以读取嵌入图片的高度和宽度，调用内嵌脚本的方法，或 availability of an embedded resource  

## 为什么要禁止 Ajax 的跨域  
- Cookie 的工作流程  
  Ajax 跨域问题首先要了解 Cookie 工作机制  
  1. 客户端携带账号密码向服务端发送请求  
  2. 服务端验证账号密码后返回响应带有 set-cookie 字段  
  3. 客户端收到响应后本地存储 Cookie  
  4. 之后的访问都会在请求头中带上 Cookie 字段  
  5. 服务器从 Cookie 中取出账号密码验证，返回登录成功的页面  

- 实际例子  
  假如 Horace 开了一个网站，每天的访问人数爆满，但是 Horace 要没钱续费云服务器和域名了，所以在网站上挂了一个收款码请求资助，但是没有一个人愿意资助。  
  于是 Horace 非常生气，就编写代码，当用户登录的时候使用 Ajax 向淘宝发起请求，因为很多用户都登录过淘宝，会有账号密码的 Cookie，所以 Ajax 请求过去的时候可以直接登录，然后 Horace 就利用 Ajax 的回调解析淘宝返回的数据，这样就得到了很多人的隐私信息，转手一卖赚大了。  

  **这就是一个典型的例子，如果 Ajax 可以跨域，Horace 就可以直接获取用户的一些隐私信息**  
  **禁止 Ajax 的跨域主要是为了防止 CSRF 攻击**  
  **用户把 Cookie 交给了浏览器，浏览器要保证用户的 Cookie 不被恶意网站利用**  
